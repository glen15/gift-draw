# 개발 가이드라인

## 코딩 스타일

### TypeScript

- 모든 새로운 코드는 TypeScript로 작성
- `any` 타입 사용 금지, 적절한 타입 정의 필수
- 인터페이스와 타입 정의는 `shared/` 디렉토리에 중앙화
- Zod 스키마를 활용한 런타임 검증

### React 컴포넌트

- 함수형 컴포넌트만 사용
- 커스텀 훅을 활용한 로직 분리
- Props 인터페이스 명시적 정의
- 컴포넌트명은 PascalCase 사용

### 스타일링

- Tailwind CSS 클래스 우선 사용
- Shadcn/ui 컴포넌트 활용
- 반응형 디자인 고려 (모바일 우선)
- 다크모드 지원 (현재 구현됨)

## 파일 구조 규칙

### 컴포넌트 구성

```
client/src/components/
├── ui/           # Shadcn/ui 기본 컴포넌트
└── [feature]/    # 기능별 커스텀 컴포넌트
```

### 페이지 구성

```
client/src/pages/
├── [page-name].tsx    # 개별 페이지 컴포넌트
```

### 유틸리티

```
client/src/lib/
├── utils.ts          # 공통 유틸리티
├── queryClient.ts    # TanStack Query 설정
└── [feature].ts      # 기능별 유틸리티
```

## API 설계 원칙

### RESTful 설계

- 명사형 엔드포인트 사용
- HTTP 메서드 의미에 맞는 사용
- 일관된 응답 형식

### 에러 처리

- 적절한 HTTP 상태 코드 사용
- 사용자 친화적인 에러 메시지 (한국어)
- 클라이언트에서 toast 알림으로 에러 표시

### 데이터 검증

- 서버에서 Zod 스키마로 입력 검증
- 클라이언트에서 React Hook Form + Zod 검증

## 상태 관리

### 서버 상태

- TanStack Query 사용
- 캐싱 전략 고려
- 낙관적 업데이트 적용

### 클라이언트 상태

- React useState/useReducer 사용
- 복잡한 상태는 커스텀 훅으로 분리
- 전역 상태가 필요한 경우 Context API 활용

## 테스트 전략

### 단위 테스트

- 비즈니스 로직 함수 테스트
- 커스텀 훅 테스트
- 유틸리티 함수 테스트

### 통합 테스트

- API 엔드포인트 테스트
- 컴포넌트 상호작용 테스트

### E2E 테스트

- 주요 사용자 플로우 테스트
- 추첨 과정 전체 테스트

## 성능 최적화

### React 최적화

- React.memo 적절한 사용
- useMemo/useCallback 필요시에만 사용
- 컴포넌트 분할로 리렌더링 최소화

### 번들 최적화

- 코드 스플리팅 적용
- 불필요한 의존성 제거
- Tree shaking 활용

## 접근성 (a11y)

### 기본 원칙

- Radix UI 컴포넌트 활용
- 적절한 ARIA 속성 사용
- 키보드 네비게이션 지원
- 색상 대비 고려

### 테스트

- 스크린 리더 테스트
- 키보드만으로 조작 테스트
- 색맹 사용자 고려

## 국제화 (i18n)

### 현재 상태

- 한국어 기본 지원
- 하드코딩된 텍스트 사용

### 향후 계획

- i18n 라이브러리 도입 고려
- 다국어 지원 확장

## 보안 고려사항

### 세션 관리

- 안전한 세션 설정
- CSRF 보호 고려
- XSS 방지

### 데이터 검증

- 서버사이드 검증 필수
- SQL 인젝션 방지 (Drizzle ORM 사용)
- 입력 데이터 sanitization

## 배포 및 운영

### 환경 변수

- 민감한 정보는 환경 변수로 관리
- 개발/프로덕션 환경 분리

### 로깅

- 적절한 로그 레벨 사용
- 에러 추적 시스템 고려

### 모니터링

- 성능 모니터링
- 에러 모니터링
- 사용자 행동 분석
